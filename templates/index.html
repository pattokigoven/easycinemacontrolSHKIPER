<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Barco ICMP Control</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>üé¨ Barco ICMP Control</h1>
            <p class="subtitle">–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ–º</p>
        </header>

        <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ -->
        <section class="connection-section">
            <h2>–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ</h2>
            <div class="connection-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="host">IP –∞–¥—Ä–µ—Å:</label>
                        <input type="text" id="host" value="192.168.1.100" placeholder="192.168.1.100">
                    </div>
                    <div class="form-group">
                        <label for="port">–ü–æ—Ä—Ç:</label>
                        <input type="number" id="port" value="43748" placeholder="43748">
                    </div>
                    <div class="form-group">
                        <label>–°—Ç–∞—Ç—É—Å:</label>
                        <span id="status-indicator" class="status-indicator offline">‚óè</span>
                    </div>
                </div>
                <button id="connect-btn" class="btn btn-primary" onclick="toggleConnection()">–ü–æ–¥–∫–ª—é—á–∏—Ç—å</button>
            </div>
        </section>

        <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ–º -->
        <section class="playback-section">
            <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ–º</h2>
            <div class="button-grid">
                <button class="btn btn-control" onclick="sendPlayerCommand('play')" disabled>
                    <span class="icon">‚ñ∂</span> Play
                </button>
                <button class="btn btn-control" onclick="sendPlayerCommand('pause')" disabled>
                    <span class="icon">‚è∏</span> Pause
                </button>
                <button class="btn btn-control" onclick="sendPlayerCommand('stop')" disabled>
                    <span class="icon">‚èπ</span> Stop
                </button>
                <button class="btn btn-control" onclick="sendPlayerCommand('clear')" disabled>
                    <span class="icon">üóë</span> Clear
                </button>
            </div>
            <div class="button-grid" style="margin-top: 10px;">
                <button class="btn btn-control btn-secondary" onclick="sendPlayerCommand('resume')" disabled>
                    <span class="icon">‚ñ∂‚ñ∂</span> Resume
                </button>
                <button class="btn btn-control btn-secondary" onclick="sendPlayerCommand('previous')" disabled>
                    <span class="icon">‚èÆ</span> Previous
                </button>
                <button class="btn btn-control btn-secondary" onclick="sendPlayerCommand('next')" disabled>
                    <span class="icon">‚è≠</span> Next
                </button>
            </div>
        </section>

        <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ—Ä–æ–º -->
        <section class="lamp-section">
            <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ—Ä–æ–º</h2>
            <div class="button-grid">
                <button class="btn btn-lamp btn-lamp-on" onclick="sendProjectorCommand('lamp_on')" disabled>
                    <span class="icon">üí°</span> Lamp ON
                </button>
                <button class="btn btn-lamp btn-lamp-off" onclick="sendProjectorCommand('lamp_off')" disabled>
                    <span class="icon">üåë</span> Lamp OFF
                </button>
                <button class="btn btn-lamp btn-secondary" onclick="sendProjectorCommand('open_dowser')" disabled>
                    <span class="icon">üîì</span> Open Dowser
                </button>
                <button class="btn btn-lamp btn-secondary" onclick="sendProjectorCommand('close_dowser')" disabled>
                    <span class="icon">üîí</span> Close Dowser
                </button>
            </div>
        </section>

        <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ–º –∑–∞–ª–∞ -->
        <section class="house-light-section">
            <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ–º –∑–∞–ª–∞</h2>
            
            <!-- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–≤–µ—Ç–æ–º —á–µ—Ä–µ–∑ EKOS -->
            <div class="button-grid">
                <button class="btn btn-house-light btn-light-on" onclick="sendLightCommand('on')" disabled>
                    <span class="icon">üí°</span> –°–≤–µ—Ç –í–ö–õ
                </button>
                <button class="btn btn-house-light btn-light-off" onclick="sendLightCommand('off')" disabled>
                    <span class="icon">üåë</span> –°–≤–µ—Ç –í–´–ö–õ
                </button>
            </div>
            <p class="hint">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ EKOS.Send Text</p>
        </section>

        <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä–æ–º–∫–æ—Å—Ç—å—é -->
        <section class="volume-section">
            <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä–æ–º–∫–æ—Å—Ç—å—é</h2>
            
            <div class="volume-control">
                <label for="volume-slider">–£—Ä–æ–≤–µ–Ω—å: <span id="volume-value">4.0</span></label>
                <input type="range" id="volume-slider" min="0" max="55" value="40" step="2" 
                       oninput="updateVolumeDisplay(this.value)" 
                       onchange="setVolume(this.value)" disabled>
                <div class="volume-presets">
                    <button class="btn btn-volume btn-secondary" onclick="setVolumePreset(0)" disabled>üîá 0</button>
                    <button class="btn btn-volume btn-secondary" onclick="setVolumePreset(30)" disabled>3.0</button>
                    <button class="btn btn-volume btn-secondary" onclick="setVolumePreset(40)" disabled>4.0</button>
                    <button class="btn btn-volume btn-secondary" onclick="setVolumePreset(42)" disabled>4.2</button>
                    <button class="btn btn-volume btn-secondary" onclick="setVolumePreset(44)" disabled>4.4</button>
                    <button class="btn btn-volume btn-secondary" onclick="setVolumePreset(46)" disabled>4.6</button>
                    <button class="btn btn-volume btn-secondary" onclick="setVolumePreset(48)" disabled>4.8</button>
                    <button class="btn btn-volume btn-secondary" onclick="setVolumePreset(50)" disabled>üîä 5.0</button>
                    <button class="btn btn-volume btn-secondary" onclick="setVolumePreset(55)" disabled>5.5</button>
                </div>
            </div>
            <p class="hint">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ tm8710.Send Text</p>
        </section>

        <!-- –ü–æ–ª–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ–∞–Ω—Å–∞ -->
        <section class="shutdown-section">
            <h2>–ü–æ–ª–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ–∞–Ω—Å–∞</h2>
            <button class="btn btn-shutdown" onclick="shutdownSession()" disabled>
                <span class="icon">üõë</span> –ó–ê–í–ï–†–®–ò–¢–¨ –°–ï–ê–ù–°
            </button>
            <p class="hint">–û—Å—Ç–∞–Ω–æ–≤–∏—Ç —Ñ–∏–ª—å–º, –≤—ã–∫–ª—é—á–∏—Ç –ª–∞–º–ø—É –∏ –æ—á–∏—Å—Ç–∏—Ç –ø–ª–µ–µ—Ä</p>
        </section>

        <!-- –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ -->
        <section class="custom-command-section">
            <h2>–ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞</h2>
            <div class="custom-command-form">
                <input type="text" id="custom-command" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: PLAYER.Next –∏–ª–∏ PROJECTOR.Execute Macro,&quot;2D_FLAT&quot;" disabled>
                <button class="btn btn-primary" onclick="sendCustomCommand()" disabled>–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            </div>
            <p class="hint">–ü—Ä–∏–º–µ—Ä—ã: PLAYER.Resume; PLAYER.Next; PROJECTOR.Open Dowser; GPIO.Set Up,5</p>
        </section>

        <!-- –õ–æ–≥ -->
        <section class="log-section">
            <h2>–õ–æ–≥ –æ–ø–µ—Ä–∞—Ü–∏–π</h2>
            <div id="log-container" class="log-container"></div>
            <button class="btn btn-secondary" onclick="clearLog()" style="margin-top: 10px;">–û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥</button>
        </section>
    </div>

    <footer>
        <p>Barco ICMP Control v1.0 | Protocol: Barco ICMP Automation over IP v0.8</p>
    </footer>

    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
